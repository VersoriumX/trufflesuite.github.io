<!DOCTYPE html>
<html>
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WHT4PS2');</script>
  <!-- End Google Tag Manager -->
  
  <!-- HubSpot Forms -->
  <!--[if lte IE 8]>
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
  <![endif]-->
  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>  <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4795067.js"></script>
  <!-- End of HubSpot Embed Code -->
  <meta charset="utf-8">
  <meta name="description" content="The Truffle suite of tools make dapp development easier and more consistent.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Favicon -->
  <link rel="icon" href="/img/favicons/favicon.ico">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Truffle Suite">
  <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Truffle Suite">
  <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

  <!-- Tile icon for Win8/10 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <!-- Facebook OpenGraph -->
  <meta property="og:site_name" content="Truffle Suite" />
  <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta property="og:title" content="Truffle | Running Migrations | Documentation | Truffle Suite" />
  <meta property="og:url" content="https://trufflesuite.com/docs/truffle/getting-started/running-migrations" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="Truffle Suite" />
  <meta name="twitter:title" content="Truffle | Running Migrations | Documentation | Truffle Suite" />
  <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta name="twitter:creator" content="Truffle Suite" />
  <meta name="twitter:domain" content="trufflesuite.com" />
  <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />

  <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

  <title>Truffle | Running Migrations | Documentation | Truffle Suite</title>

  <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
  <script src="https://kit.fontawesome.com/371f2d7a8a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/index.css">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHT4PS2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
    <a class="navbar-brand current" href="/">
        <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="d-none d-lg-block">TRUFFLE SUITE</span>
    </a>
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
  
          <div class="dropdown-menu">
            <a class="text-truffle" href="/teams">
              <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><span class="narrow">T</span>RUFFLE TEAMS
            </a>
            <a class="text-truffle" href="/truffle">
              <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
            </a>
            <a class="text-ganache" href="/ganache">
              <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
            </a>
            <a class="text-drizzle" href="/drizzle">
              <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
            </a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs">DOCS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/guides">GUIDES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tutorial">TUTORIAL</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/boxes">BOXES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">BLOG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/community">COMMUNITY</a>
        </li>
      </ul>
    </div>
  </nav>

  <main role="main" class="container-fluid">
    <!--<div class="row pt-4 pb-4">
      <div class="col">
        <form>
          <div class="row">
            <div class="col">
              <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="🔍 Search">
            </div>
            <div class="col">
              <select id="inputState" class="form-control">
                <option selected>4.1</option>
                <option>4.0.6</option>
                <option>4.0.5</option>
              </select>
            </div>
            <div class="col">
              <button type="submit" class="btn btn-truffle">SEARCH</button>
            </div>
          </div>
        </form>
      </div>
    </div>-->



    <div class="row row-docs-main">
      <!-- Show the sidebar *only if* we're not directly under /docs (e.g., index, search). -->

          <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
            <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
          
            <div class="docs-top-nav">
              <a href="/docs">
                <div class="docs-back-button">
                  <i class="fad fa-arrow-square-left"></i>
                </div>
                Ethereum & EVM-based chains
              </a>
            </div>
          
            <div class="docs-wrapper">
          
              <form class="mb-4" id="searchForm">
                <div class="input-group">
                  <input type="text" class="form-control" id="searchInput" placeholder="Search">
                  <div class="input-group-append">
                    <button type="submit" class="btn btn-truffle">SEARCH</button>
                  </div>
                </div>
              </form>
          
              <a class="toggle-teams suite-link" href="#teamsDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><h2 class="text-truffle">TRUFFLE TEAMS</h2>
              </a>
          
              <div class="collapse teams " id="teamsDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/teams/overview"><li>Overview</li></a>
                  <a href="/docs/teams/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/teams/getting-started/creating-an-account"><li>Creating an account</li></a>
                      <a href="/docs/teams/getting-started/adding-repositories"><li>Adding repositories</li></a>
                  </ul>
                  <h3>Account</h3>
                  <ul>
                      <a href="/docs/teams/account/manage-your-account"><li>Manage your account</li></a>
                      <a href="/docs/teams/account/switching-accounts"><li>Switching accounts</li></a>
                      <a href="/docs/teams/account/claim-a-1-month-trial"><li>Claim a 1-month trial</li></a>
                      <a href="/docs/teams/account/invite-your-team"><li>Invite your team</li></a>
                      <a href="/docs/teams/account/redeeming-a-coupon"><li>Redeeming a coupon</li></a>
                  </ul>
                  <h3>Builds</h3>
                  <ul>
                      <a href="/docs/teams/builds/builds-overview"><li>Builds overview</li></a>
                      <a href="/docs/teams/builds/starting-builds"><li>Starting builds</li></a>
                      <a href="/docs/teams/builds/restarting-builds"><li>Restarting builds</li></a>
                      <a href="/docs/teams/builds/external-ci"><li>External CI</li></a>
                  </ul>
                  <h3>Sandboxes</h3>
                  <ul>
                      <a href="/docs/teams/sandboxes/sandboxes-overview"><li>Sandboxes overview</li></a>
                      <a href="/docs/teams/sandboxes/creating-a-sandbox"><li>Creating a sandbox</li></a>
                      <a href="/docs/teams/sandboxes/renaming-a-sandbox"><li>Renaming a sandbox</li></a>
                      <a href="/docs/teams/sandboxes/destroying-a-sandbox"><li>Destroying a sandbox</li></a>
                      <a href="/docs/teams/sandboxes/sandbox-forking"><li>Sandbox forking</li></a>
                      <a href="/docs/teams/sandboxes/usage-with-truffle"><li>Usage with Truffle</li></a>
                  </ul>
                  <h3>Deployments</h3>
                  <ul>
                      <a href="/docs/teams/deployments/deployments-overview"><li>Deployments overview</li></a>
                      <a href="/docs/teams/deployments/creating-a-deployment"><li>Creating a deployment</li></a>
                      <a href="/docs/teams/deployments/deploying-to-a-sandbox"><li>Deploying to a sandbox</li></a>
                      <a href="/docs/teams/deployments/deployment-details"><li>Deployment details</li></a>
                      <a href="/docs/teams/deployments/contract-monitoring"><li>Contract monitoring</li></a>
                      <a href="/docs/teams/deployments/deployment-console"><li>Deployment console</li></a>
                      <a href="/docs/teams/deployments/graduating-a-deployment"><li>Graduating a deployment</li></a>
                      <a href="/docs/teams/deployments/archiving-a-deployment"><li>Archiving a deployment</li></a>
                  </ul>
                  <h3>Debugger</h3>
                  <ul>
                      <a href="/docs/teams/debugger/debugger-overview"><li>Debugger overview</li></a>
                      <a href="/docs/teams/debugger/debugging-a-transaction"><li>Debugging a transaction</li></a>
                      <a href="/docs/teams/debugger/using-the-debugger"><li>Using the debugger</li></a>
                  </ul>
                  <h3>Contract Manager</h3>
                  <ul>
                      <a href="/docs/teams/contract-manager/contract-manager-overview"><li>Contract manager overview</li></a>
                      <a href="/docs/teams/contract-manager/interacting-with-functions"><li>Interacting with functions</li></a>
                      <a href="/docs/teams/contract-manager/connecting-to-a-sandbox"><li>Connecting to a sandbox</li></a>
                  </ul>
                  <h3>Dashboard</h3>
                  <ul>
                      <a href="/docs/teams/dashboard/dashboard-overview"><li>Dashboard overview</li></a>
                      <a href="/docs/teams/dashboard/adding-a-deployment"><li>Adding a deployment</li></a>
                      <a href="/docs/teams/dashboard/switching-deployments"><li>Switching deployments</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/teams/reference/configuration"><li>Configuration</li></a>
                      <a href="/docs/teams/reference/permissions-disclosure"><li>Permissions disclosure</li></a>
                  </ul>
                  <h3>Support</h3>
                  <ul>
                      <a href="/docs/teams/support/ask-us-a-question"><li>Ask us a question</li></a>
                  </ul>
              </div>
          
              <a class="toggle-truffle suite-link" href="#truffleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
              </a>
          
              <div class="collapse truffle show" id="truffleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/truffle/overview"><li>Overview</li></a>
                  <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                      <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                      <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                      <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                      <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                      <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                      <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
                      <a href="/docs/truffle/getting-started/preserving-files-and-content-to-storage-platforms"><li>Preserving Files and Content to Storage Platforms</li></a>
                  </ul>
                  <h3>Testing</h3>
                  <ul>
                      <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
                  </ul>
                  <h3>Distributed Ledger Support</h3>
                  <ul>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-quorum"><li>Working With Quorum</li></a>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-hyperledger-evm"><li>Working With Hyperledger EVM</li></a>
                  </ul>
                  <h3>Advanced</h3>
                  <ul>
                      <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                      <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                      <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
                      <a href="/docs/truffle/advanced/event-system"><li>Event System</li></a>
                      <a href="/docs/truffle/advanced/ethereum-name-service"><li>Ethereum Name Service</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                      <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                      <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                      <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                      <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
                  </ul>
                <h3>Guides</h3>
                <ul>
                  <a href="/guides/debugging-a-smart-contract"><li>Debugging a smart contract</li></a>
                  <a href="/guides/debugger-variable-inspection"><li>Variable Inspection: Going Deeper with the Truffle Solidity Debugger</li></a>
                  <a href="/guides/using-infura-custom-provider"><li>Using Infura (or a custom provider)</li></a>
                  <a href="/guides/deploying-to-the-live-network"><li>Deploying to the Live Network</li></a>
                  <a href="/guides/creating-a-cli-with-truffle-3"><li>Creating an Ethereum-enabled command line tool with Truffle 3.0</li></a>
                </ul>
              </div>
          
              <a class="toggle-ganache suite-link" href="#ganacheDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
              </a>
              
              <div class="collapse ganache " id="ganacheDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/ganache/overview"><li>Overview</li></a>
                  <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Workspaces</h3>
                  <ul>
                      <a href="/docs/ganache/workspaces/the-quickstart-workspace"><li>The Quickstart Workspace</li></a>
                      <a href="/docs/ganache/workspaces/ethereum-workspace-overview"><li>Ethereum Workspace Overview</li></a>
                      <a href="/docs/ganache/workspaces/creating-workspaces"><li>Creating Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/loading-existing-workspaces"><li>Loading Existing Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/switching-workspaces"><li>Switching Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/deleting-workspaces"><li>Deleting Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/editing-workspaces"><li>Editing Workspaces</li></a>
                  </ul>
                  <h3>Truffle Projects</h3>
                  <ul>
                      <a href="/docs/ganache/truffle-projects/linking-a-truffle-project"><li>Linking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/unlinking-a-truffle-project"><li>Unlinking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/contracts-page"><li>Contracts Page</li></a>
                      <a href="/docs/ganache/truffle-projects/events-page"><li>Events Page</li></a>
                      <a href="/docs/ganache/truffle-projects/decoded-transactions"><li>Decoded Transactions</li></a>
                  </ul>
                  <h3>Corda</h3>
                  <ul>
                      <a href="/docs/ganache/corda/working-with-corda"><li>Working with Corda</li></a>
                      <a href="/docs/ganache/corda/workspace-overview"><li>Workspace Overview</li></a>
                      <a href="/docs/ganache/corda/linking-a-corda-project"><li>Linking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/unlinking-a-corda-project"><li>Unlinking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/nodes"><li>Nodes</li></a>
                      <a href="/docs/ganache/corda/transactions"><li>Transactions</li></a>
                      <a href="/docs/ganache/corda/cordapps"><li>CorDapps</li></a>
                      <a href="/docs/ganache/corda/shell"><li>Shell</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/ganache/reference/ganache-settings"><li>Ganache Settings</li></a>
                      <a href="/docs/ganache/reference/workspace-default-configuration"><li>Workspace Default Configuration</li></a>
                  </ul>
                <h3>Guides</h3>
                <ul>
                  <a href="/guides/debugging-a-smart-contract"><li>Debugging a smart contract</li></a>
                  <a href="/guides/debugger-variable-inspection"><li>Variable Inspection: Going Deeper with the Truffle Solidity Debugger</li></a>
                </ul>
              </div>
          
              <a class="toggle-drizzle suite-link" href="#drizzleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
              </a>
              
              <div class="collapse drizzle " id="drizzleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/drizzle/overview"><li>Overview</li></a>
                  <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/drizzle/getting-started/using-drizzles-redux-store"><li>Using Drizzle&#x27;s Redux Store</li></a>
                      <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
                  </ul>
                  <h3>React</h3>
                  <ul>
                      <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                      <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                      <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                      <a href="/docs/drizzle/reference/drizzle-actions"><li>Drizzle Actions</li></a>
                      <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
                  </ul>
                <h3>Guides</h3>
                <ul>
                  <a href="/guides/drizzle-and-contract-events"><li>Drizzle and Contract Events</li></a>
                  <a href="/guides/getting-started-with-drizzle-and-react"><li>Getting Started with Drizzle and React</li></a>
                </ul>
              </div>
            </div>
          </aside>        
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a class="anchor-target" name="running-migrations"></a>
      <a href="#running-migrations"><i class="fas fa-link"></i></a>
      Running Migrations
    </h1>
  <p>Migrations are JavaScript files that help you deploy contracts to the Ethereum network. These files are responsible for staging your deployment tasks, and they&#39;re written under the assumption that your deployment needs will change over time. As your project evolves, you&#39;ll create new migration scripts to further this evolution on the blockchain. A history of previously run migrations is recorded on-chain through a special <code>Migrations</code> contract, detailed below.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="command"></a>
      <a href="#command"><i class="fas fa-link"></i></a>
      Command
    </h2>
  <p>To run your migrations, run the following:</p>
<pre><code class="language-shell">$ truffle migrate</code></pre>
<p>This will run all migrations located within your project&#39;s <code>migrations</code> directory. At their simplest, migrations are simply a set of managed deployment scripts. If your migrations were previously run successfully, <code>truffle migrate</code> will start execution from the last migration that was run, running only newly created migrations. If no new migrations exists, <code>truffle migrate</code> won&#39;t perform any action at all. You can use the <code>--reset</code> option to run all your migrations from the beginning. Other command options are documented <a href="../reference/truffle-commands#migrate">here</a>. For local testing, make sure to have a test blockchain such as <a href="/ganache">Ganache</a> configured and running before executing <code>truffle migrate</code>. You can also use <code>truffle develop</code> and run your migrations.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="migration-files"></a>
      <a href="#migration-files"><i class="fas fa-link"></i></a>
      Migration files
    </h2>
  <p>A simple migration file looks like this:</p>
<p>Filename: <code>4_example_migration.js</code></p>
<pre><code class="language-javascript">var MyContract = artifacts.require(&quot;MyContract&quot;);

module.exports = function(deployer) {
  // deployment steps
  deployer.deploy(MyContract);
};</code></pre>
<p>Note that the filename is prefixed with a number and is suffixed by a description. The numbered prefix is required in order to record whether the migration ran successfully. The suffix is purely for human readability and comprehension.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="artifacts-require-"></a>
      <a href="#artifacts-require-"><i class="fas fa-link"></i></a>
      artifacts.require()
    </h3>
  <p>At the beginning of the migration, we tell Truffle which contracts we&#39;d like to interact with via the <code>artifacts.require()</code> method. This method is similar to Node&#39;s <code>require</code>, but in our case it specifically returns a contract abstraction that we can use within the rest of our deployment script. The name specified should match <strong>the name of the contract definition</strong> within that source file. Do not pass the name of the source file, as files can contain more than one contract.</p>
<p>Consider this example where two contracts are specified within the same source file:</p>
<p>Filename: <code>./contracts/Contracts.sol</code></p>
<pre><code class="language-solidity">contract ContractOne {
  // ...
}

contract ContractTwo {
  // ...
}</code></pre>
<p>To use only <code>ContractTwo</code>, your <code>artifacts.require()</code> statement would look like this:</p>
<pre><code class="language-javascript">var ContractTwo = artifacts.require(&quot;ContractTwo&quot;);</code></pre>
<p>To use both contracts, you will need two <code>artifacts.require()</code> statements:</p>
<pre><code class="language-javascript">var ContractOne = artifacts.require(&quot;ContractOne&quot;);
var ContractTwo = artifacts.require(&quot;ContractTwo&quot;);</code></pre>

    <h3 class="link-markdown">
      <a class="anchor-target" name="module-exports"></a>
      <a href="#module-exports"><i class="fas fa-link"></i></a>
      module.exports
    </h3>
  <p>All migrations must export a function via the <code>module.exports</code> syntax. The function exported by each migration should accept a <code>deployer</code> object as its first parameter. This object aides in deployment by both providing a clear syntax for deploying smart contracts as well as performing some of deployment&#39;s more mundane duties, such as saving deployed artifacts for later use. The <code>deployer</code> object is your main interface for staging deployment tasks, and its API is described at the bottom of this page.</p>
<p>Your migration function can accept other parameters as well. See the examples below.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="initial-migration"></a>
      <a href="#initial-migration"><i class="fas fa-link"></i></a>
      Initial migration
    </h2>
  <p>Truffle requires you to have a Migrations contract in order to use the Migrations feature. This contract must contain a specific interface, but you&#39;re free to edit this contract at will. For most projects, this contract will be deployed initially as the first migration and won&#39;t be updated again. You will also receive this contract by default when creating a new project with <code>truffle init</code>.</p>
<p>Filename: <code>contracts/Migrations.sol</code></p>
<pre><code class="language-solidity">pragma solidity ^0.4.8;

contract Migrations {
  address public owner;

  // A function with the signature `last_completed_migration()`, returning a uint, is required.
  uint public last_completed_migration;

  modifier restricted() {
    if (msg.sender == owner) _;
  }

  function Migrations() {
    owner = msg.sender;
  }

  // A function with the signature `setCompleted(uint)` is required.
  function setCompleted(uint completed) restricted {
    last_completed_migration = completed;
  }

  function upgrade(address new_address) restricted {
    Migrations upgraded = Migrations(new_address);
    upgraded.setCompleted(last_completed_migration);
  }
}</code></pre>
<p>You must deploy this contract inside your first migration in order to take advantage of the migrations feature.  The following migration is provided by default when creating a new project with <code>truffle init</code>:</p>
<p>Filename: <code>migrations/1_initial_migration.js</code></p>
<pre><code class="language-javascript">var Migrations = artifacts.require(&quot;Migrations&quot;);

module.exports = function(deployer) {
  // Deploy the Migrations contract as our only task
  deployer.deploy(Migrations);
};</code></pre>
<p>From here, you can create new migrations with increasing numbered prefixes to deploy other contracts and perform further deployment steps.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="deployer"></a>
      <a href="#deployer"><i class="fas fa-link"></i></a>
      Deployer
    </h2>
  <p>Your migration files will use the deployer to stage deployment tasks. As such, you can write deployment tasks synchronously and they&#39;ll be executed in the correct order:</p>
<pre><code class="language-javascript">// Stage deploying A before B
deployer.deploy(A);
deployer.deploy(B);</code></pre>
<p>Alternatively, each function on the deployer can be used as a Promise, to queue up deployment tasks that depend on the execution of the previous task:</p>
<pre><code class="language-javascript">// Deploy A, then deploy B, passing in A&#39;s newly deployed address
deployer.deploy(A).then(function() {
  return deployer.deploy(B, A.address);
});</code></pre>
<p>It is possible to write your deployment as a single promise chain if you find that syntax to be more clear. The deployer API is discussed at the bottom of this page.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="network-considerations"></a>
      <a href="#network-considerations"><i class="fas fa-link"></i></a>
      Network considerations
    </h2>
  <p>It is possible to run deployment steps conditionally based on the network being deployed to. This is an advanced feature, so see the <a href="/docs/advanced/networks">Networks</a> section first before continuing.</p>
<p>To conditionally stage deployment steps, write your migrations so that they accept a second parameter, called <code>network</code>. Example:</p>
<pre><code class="language-javascript">module.exports = function(deployer, network) {
  if (network == &quot;live&quot;) {
    // Do something specific to the network named &quot;live&quot;.
  } else {
    // Perform a different step otherwise.
  }
}</code></pre>

    <h2 class="link-markdown">
      <a class="anchor-target" name="available-accounts"></a>
      <a href="#available-accounts"><i class="fas fa-link"></i></a>
      Available accounts
    </h2>
  <p>Migrations are also passed the list of accounts provided to you by your Ethereum client and web3 provider, for you to use during your deployments. This is the exact same list of accounts returned from <code>web3.eth.getAccounts()</code>.</p>
<pre><code class="language-javascript">module.exports = function(deployer, network, accounts) {
  // Use the accounts within your migrations.
}</code></pre>

    <h2 class="link-markdown">
      <a class="anchor-target" name="deployer-api"></a>
      <a href="#deployer-api"><i class="fas fa-link"></i></a>
      Deployer API
    </h2>
  <p>The deployer contains many functions available to simplify your migrations.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="deployer-deploy-contract-args-options-"></a>
      <a href="#deployer-deploy-contract-args-options-"><i class="fas fa-link"></i></a>
      deployer.deploy(contract, args..., options)
    </h3>
  <p>Deploy a specific contract, specified by the contract object, with optional constructor arguments. This is useful for singleton contracts, such that only one instance of this contract exists for your dapp. This will set the address of the contract after deployment (i.e., <code>Contract.address</code> will equal the newly deployed address), and it will override any previous address stored.</p>
<p>You can optionally pass an array of contracts, or an array of arrays, to speed up deployment of multiple contracts. Additionally, the last argument is an optional object that can include the key named <code>overwrite</code> as well as other transaction parameters such as <code>gas</code> and <code>from</code>. If <code>overwrite</code> is set to <code>false</code>, the deployer won&#39;t deploy this contract if one has already been deployed. This is useful for certain circumstances where a contract address is provided by an external dependency.</p>
<p>Note that you will need to deploy and link any libraries your contracts depend on first before calling <code>deploy</code>. See the <code>link</code> function below for more details.</p>
<p>For more information, please see the <a href="https://github.com/trufflesuite/truffle/tree/master/packages/contract">@truffle/contract</a> documentation.</p>
<p>Examples:</p>
<pre><code class="language-javascript">// Deploy a single contract without constructor arguments
deployer.deploy(A);

// Deploy a single contract with constructor arguments
deployer.deploy(A, arg1, arg2, ...);

// Don&#39;t deploy this contract if it has already been deployed
deployer.deploy(A, {overwrite: false});

// Set a maximum amount of gas and `from` address for the deployment
deployer.deploy(A, {gas: 4612388, from: &quot;0x....&quot;});

// Deploying multiple contracts as an array is now deprecated.
// This used to be quicker than writing three `deployer.deploy()` statements as the deployer
// can perform the deployment as a single batched request.
// deployer.deploy([
//   [A, arg1, arg2, ...],
//   B,
//   [C, arg1]
// ]);

// External dependency example:
//
// For this example, our dependency provides an address when we&#39;re deploying to the
// live network, but not for any other networks like testing and development.
// When we&#39;re deploying to the live network we want it to use that address, but in
// testing and development we need to deploy a version of our own. Instead of writing
// a bunch of conditionals, we can simply use the `overwrite` key.
deployer.deploy(SomeDependency, {overwrite: false});</code></pre>

    <h3 class="link-markdown">
      <a class="anchor-target" name="deployer-link-library-destinations-"></a>
      <a href="#deployer-link-library-destinations-"><i class="fas fa-link"></i></a>
      deployer.link(library, destinations)
    </h3>
  <p>Link an already-deployed library to a contract or multiple contracts. <code>destinations</code> can be a single contract or an array of multiple contracts. If any contract within the destination doesn&#39;t rely on the library being linked, the contract will be ignored.</p>
<p>Example:</p>
<pre><code class="language-javascript">// Deploy library LibA, then link LibA to contract B, then deploy B.
deployer.deploy(LibA);
deployer.link(LibA, B);
deployer.deploy(B);

// Link LibA to many contracts
deployer.link(LibA, [B, C, D]);</code></pre>

    <h3 class="link-markdown">
      <a class="anchor-target" name="deployer-then-function-"></a>
      <a href="#deployer-then-function-"><i class="fas fa-link"></i></a>
      deployer.then(function() {...})
    </h3>
  <p>Just like a promise, run an arbitrary deployment step. Use this to call specific contract functions during your migration to add, edit and reorganize contract data.</p>
<p>Example:</p>
<pre><code class="language-javascript">var a, b;
deployer.then(function() {
  // Create a new version of A
  return A.new();
}).then(function(instance) {
  a = instance;
  // Get the deployed instance of B
  return B.deployed();
}).then(function(instance) {
  b = instance;
  // Set the new instance of A&#39;s address on B via B&#39;s setA() function.
  return b.setA(a.address);
});</code></pre>

    <h3 class="link-markdown">
      <a class="anchor-target" name="migrations-with-async-await"></a>
      <a href="#migrations-with-async-await"><i class="fas fa-link"></i></a>
      Migrations with async/await
    </h3>
  <p>You can also migrate your contracts using <code>async/await</code>:</p>
<p>Example:</p>
<pre><code class="language-javascript">module.exports = async function(deployer) {
  // deploy a contract
  await deployer.deploy(MyContract);
  //access information about your deployed contract instance
  const instance = await MyContract.deployed();
}</code></pre>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/develop/src/docs/truffle/getting-started">Edit here &raquo;</a>
          </div>        </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/vendor/prism.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="/js/docs.js"></script>
  <script src="https://unpkg.com/lunr/lunr.js"></script>
  <script src="/js/docs-search.js"></script>
</body>
</html>